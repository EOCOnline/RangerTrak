<pageHeader [parentTitle]="title" [pageDescription]="pageDescr">...</pageHeader>
<div class="container">
  <form #frm="ngForm" [formGroup]="entryDetailsForm" (ngSubmit)="onFormSubmit(frm.value)" class="enter__form">
    <mini-lmap [locationUpdated]="location">LMAP HERE</mini-lmap>
    <!--mini-gmap [locationUpdated]="location">GMAP HERE</mini-gmap-->

    <!-- ======================================= -->
    <h2 class="elegant">
      <mat-label>Who</mat-label>
    </h2>
    <!--  https://material.angular.io/components/autocomplete/examples#autocomplete-overview
    https://www.wufoo.com/html5/tabindex-attribute/ -->
    <mat-form-field class="enter__Callsign filled">
      <mat-label>CallSign</mat-label>
      <input matInput [formControl]=" callsignCtrl" type="text" placeholder="Pick one" aria-label="Callsigns"
        formControlName="callsign" [matAutocomplete]="auto" (change)="this.callsignCtrlChanged()"
        id="enter__Callsign-input" tabindex="1" data-lpignore="true" />
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let ranger of filteredRangers | async" [value]="ranger.callsign">
          <img class="enter__Callsign-img" aria-hidden [src]="'./assets/imgs/'+(ranger.image)" height="40">
          <span> {{ranger.callsign}}</span> |
          <small> {{ranger.fullName}} | {{ranger.phone}}</small>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <span id="enter__Callsign-image"> </span>
    <span id="enter__Callsign-upshot"> </span>

    <!-- ======================================= -->
    <h2 class="elegant"
      title="Enter position using  Degrees Decmal (DD)  or  Degrees, Minutes & Seconds (DMS)  or  Degrees Minutes & Seconds (DDM)">
      <mat-label>Where</mat-label>&nbsp;&nbsp;
      <span class="small">(updates map to the right)</span><img src="../../assets/icons/information-outline.png"
        height="16px" width="16px" alt="info icon" />
    </h2>

    <div>
      <rangertrak-location (newLocationEvent)="onNewLocationParent($event)" [initialLoc]="initialLocation">
      </rangertrak-location>
    </div>

    <!-- ======================================= -->
    <h2 class="elegant">
      <mat-label>When</mat-label>
    </h2>
    <div FormControl="timepickerFormControl" class="filled timepicker timepicker_When-input">
      <rangertrak-time-picker #picker [datePickerLabel]="timePickerLabel" (newTimeEvent)="onNewTimeEvent($event)">
        <!-- [initialDate] = "initialTime" -->
      </rangertrak-time-picker>
    </div>

    <!-- ======================================= -->
    <h2 class="elegant bordered">
      <mat-label>What</mat-label>
    </h2>
    <div class="input-group bordered">
      <!-- mat-label><div class="strong bottomDrop">Status:</div></mat-label -->
      <mat-radio-group class="filled  enter__Status" labelPosition="after" formControlName="status" tabindex="7"><span
          class="bottomDrop">Status:&nbsp;&nbsp;</span>
        <mat-radio-button *ngFor="let stat of settings.fieldReportStatuses" value="{{stat.status}}" class="rButton">
          <span class="Enter__status-value" style="color:{{stat.color}}"> {{stat.status}} </span>&nbsp;&nbsp;&nbsp;
          <!-- Disabling intelephense.diagnostics.embeddedLanguages -->
        </mat-radio-button>
      </mat-radio-group>
      <br />
      <br />

      <textarea class="input-group enter__What--area" formControlName="notes" id="enter__What--area" cols="80" rows="5"
        placeholder="Enter Any Notes" tabindex="8"></textarea>
    </div>

    <!-- ======================================= -->
    <!-- TODO: Add h4> Keywords</h4>
    <div formArrayName="keywords">
      <div *ngIf="keywordsControls && keywordsControls.length">
        <div *ngFor="let keywordControl of keywordsControls; let i = index">
          <div class="input-group">
            <input [class.border-danger]="keywordControl.touched && keywordControl.invalid" [formControlName]="i"
              type="text" placeholder="keyword" />
            <div *ngIf="keywordControl.touched && keywordControl.hasError('required')" class="text-sm text-danger">
              keyword Name is required</div>
          </div>
          <hr>
        </div>
      </div>
    </div-->
    <br />

    <!-- ======================================= -->
    <!--button (click)="this.entryDetailsForm.reset()" type="reset">Reset (native)</button> <br-->
    <button (click)="resetEntryForm()" title="Reset all form fields to their defaults" class="eButton" type="button">
      Reset
    </button>

    <button class="enter__Submit-button eButton" [disabled]="entryDetailsForm.invalid" type="submit" tabindex="9">
      Submit
    </button>

    <span id="enter__Submit-info"> </span>

    <div id="enter__frm-reguritation">
      <h4>Entry Form Details:</h4>
      <pre><strong>EntryForm valid:</strong> {{entryDetailsForm.valid | json}}</pre>
      <pre><strong>EntryForm value:</strong> {{entryDetailsForm.value | json}}</pre>
    </div>
  </form>
</div>
